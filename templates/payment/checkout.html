{% extends 'base.html' %}
{% block content %}

<div class="row justify-content-center">
    <div class="col-6">
        
        <!-- {% if request.user.profile.shipping_address %}
            
            {% for shipping in user.profile.shipping_address.all %}
            <div class="col-4 my-2">
                <div class="card">
                    <div class="p-2">
                        <div>
                            {{shipping.full_name}}
                        </div>
                        <a href="{% url 'address_update' shipping.id %}">Edit Addres</a>
                    </div>
                </div>
            </div>
            {% endfor %}
                
        {% endif %} -->
        <div class="">
            <form action="" method="post">
                {% csrf_token %}
                {{shipping_form.as_p}}
                <button type="submit" class="btn-color-primary py-2 px-4 fw-medium rounded-2 d-inline-flex justify-content-center align-items-center">Continue To Billing</button>
            </form>
        </div>
    </div>
    <div class="col-6">
        <h4>Cart Summary</h4>
        <div class="mt-3 mb-4">
            {% for product in cart.get_products %}
            <div class="mt-2">
                <div class="position-relative">
                    <img src="{{product.image.url}}" alt="{{product.name}}" width="50px" class="rounded-2">
                    {% for key,value in cart.get_quants.items %}
                    {% if key == product.id|slugify %}
                    <span class="cart_quantity rounded-circle px-1 bg-secondary text-center text-white position-absolute top-0 translate-middle">{{value}}</span>
                    {% endif %}
                    {% endfor %}
                </div>
                {{product.name}}
                
                {% if product.is_sale %}
                ${{product.discounted_price}}
                {% else %}
                ${{product.price}}
                {% endif %}
            </div>
            {% endfor %}
        </div>
        <div class="d-flex justify-content-between fw-bold">
            <span>Total</span>
            <span>${{cart.total}}</span>
        </div>
    </div>
</div>

{% endblock %}